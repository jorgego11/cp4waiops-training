{
    "componentChunkName": "component---src-pages-50-troubleshooting-50-troubleshooting-02-mdx",
    "path": "/50-troubleshooting/50-troubleshooting-02/",
    "result": {"pageContext":{"frontmatter":{"title":"Installation Problems","date":"2022-11-03T09:57:46.000Z","weight":301},"relativePagePath":"/50-troubleshooting/50-troubleshooting-02.mdx","titleType":"page","MdxNode":{"id":"5ccff740-e04d-5b4c-8605-c651ac1f2583","children":[],"parent":"42d4b3c1-0122-562b-922e-fccf6dcebafd","internal":{"content":"---\ntitle: \"Installation Problems\"\ndate: 2022-11-03T10:57:46+01:00\nweight: 301\n---\n\n\n\n\n## Topology Pods in Crashloop\n\nIf the aiops-topology-xxx Pods are crashlooping, apply the following patches. I have only seen this happen on ROKS.\n\n```bash\n\noc patch deployment aiops-topology-merge -n cp4waiops --patch-file \"./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-merge-patch.yaml\"\noc patch deployment aiops-topology-search -n cp4waiops --patch-file \"./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-search-patch.yaml\"\noc patch deployment aiops-topology-status -n cp4waiops --patch-file \"./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-status-patch.yaml\"\noc patch deployment aiops-topology-layout -n cp4waiops --patch-file \"./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-layout-patch.yaml\"\n\n```\n\n\n\n\n## Pods with Pull Error\n\nIf Pods are having pull errors, apply the following patches. \n\n```bash\n\nkubectl patch -n cp4waiops serviceaccount aiops-topology-service-account -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-spark-worker -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-spark-pipeline-composer -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-spark-master -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-probablecause -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-classifier -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-lifecycle-eventprocessor-ep -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\noc delete pod $(oc get po -n cp4waiops|grep ImagePull|awk '{print$1}') -n cp4waiops\n\n```","type":"Mdx","contentDigest":"59b6107fd08bb545940ac67988548f10","owner":"gatsby-plugin-mdx","counter":256},"frontmatter":{"title":"Installation Problems","date":"2022-11-03T09:57:46.000Z","weight":301},"exports":{},"rawBody":"---\ntitle: \"Installation Problems\"\ndate: 2022-11-03T10:57:46+01:00\nweight: 301\n---\n\n\n\n\n## Topology Pods in Crashloop\n\nIf the aiops-topology-xxx Pods are crashlooping, apply the following patches. I have only seen this happen on ROKS.\n\n```bash\n\noc patch deployment aiops-topology-merge -n cp4waiops --patch-file \"./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-merge-patch.yaml\"\noc patch deployment aiops-topology-search -n cp4waiops --patch-file \"./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-search-patch.yaml\"\noc patch deployment aiops-topology-status -n cp4waiops --patch-file \"./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-status-patch.yaml\"\noc patch deployment aiops-topology-layout -n cp4waiops --patch-file \"./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-layout-patch.yaml\"\n\n```\n\n\n\n\n## Pods with Pull Error\n\nIf Pods are having pull errors, apply the following patches. \n\n```bash\n\nkubectl patch -n cp4waiops serviceaccount aiops-topology-service-account -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-spark-worker -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-spark-pipeline-composer -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-spark-master -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-probablecause -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-classifier -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\nkubectl patch -n cp4waiops serviceaccount aiops-ir-lifecycle-eventprocessor-ep -p '{\"imagePullSecrets\": [{\"name\": \"ibm-entitlement-key\"}]}'\noc delete pod $(oc get po -n cp4waiops|grep ImagePull|awk '{print$1}') -n cp4waiops\n\n```","fileAbsolutePath":"/Users/jorgego/CODE/waiops/nik-automationv3.6/cp4waiops-training/src/pages/50-troubleshooting/50-troubleshooting-02.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}
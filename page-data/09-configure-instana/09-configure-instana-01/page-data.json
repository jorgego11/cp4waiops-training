{
    "componentChunkName": "component---src-pages-09-configure-instana-09-configure-instana-01-mdx",
    "path": "/09-configure-instana/09-configure-instana-01/",
    "result": {"pageContext":{"frontmatter":{"title":"Installing Instana","date":"2022-11-03T09:57:46.000Z","weight":151},"relativePagePath":"/09-configure-instana/09-configure-instana-01.mdx","titleType":"page","MdxNode":{"id":"e5731bcd-6cbb-51ad-a582-d7fe3110f63d","children":[],"parent":"853d1270-b770-5ab1-9a56-6be690001042","internal":{"content":"---\ntitle: \"Installing Instana\"\ndate: 2022-11-03T10:57:46+01:00\nweight: 151\n---\n\n\n## üöÄ TASK: Installing Instana\n\n<InlineNotification kind=\"warning\"> \n\n**Turbonomic License Key **\n\nIf you are not following this as part of an IBM training course, you will have to provide your own Instana Licenses.\n\n</InlineNotification>\n\nThere are two ways of installing Instana\n\n<Accordion>\n<AccordionItem title=\"üîé If you are following an IBM Course\">\n\n## Get the `oc login` command\n\n1. Open your Openshift Web Console\n1. Select `Copy Login Command`\n\n\t![image](./../images/01_fzth_ocp_connect.png)\n\n1. Copy the `oc login ..` string\n\n\t![image](./../images/02_fzth_ocp_connect.png)\n\n\n## Install and activate Instana\n\n1. Go to the following page:\n\n    <a href=\"https://ibm.biz/training-activation\" target=\"_blank\" >üöÄ Training Activation Portal</a>\n\n2. Login with the Access Information **provided by the Course Trainer**:\n    - Course ID\n    - EMail Address\n    - Course Password\n\n    ![instana](./../images/instana/instana_install_02.png)\n\n2. Click on `Install and Activate Instana`\n\n    ![instana](./../images/instana/instana_install_01.png)\n\n2. Paste in the `oc login ..`\n\n3. Click `Activate`\n\n    ![instana](./../images/instana/instana_install_03.png)\n\n2. If all is good, you should get a success message:\n\n    ![instana](./../images/instana/instana_install_04.png)\n\n</AccordionItem>\n</Accordion>\n\n\n\n\n<Accordion>\n<AccordionItem title=\"üîé If you have Licenses available (self study)\">\n\n1. Copy the following code \n\n```yaml\ncat << 'EOF' | oc apply -f -\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: installer-default-default-admin\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n  - kind: ServiceAccount\n    name: default\n    namespace: default\n---\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: waiops-easy-install-instana-practicum\n  namespace: default\nspec:\n  serviceAccountName: installer-default-default-admin\n  template:\n    spec:\n      containers:\n        - name: install\n          image: niklaushirt/cp4waiops-tools:2.0\n          imagePullPolicy: IfNotPresent\n          command:\n            - /bin/sh\n            - -c\n            - |\n              #!/bin/bash\n              #set -x\n\n\n              echo \"*****************************************************************************************************************************\"\n              echo \" ‚úÖ STARTING: INSTALL CP4WAIOPS with Demo Content\"\n              echo \"*****************************************************************************************************************************\"\n              echo \"\"\n              echo \"\"\n              echo \"------------------------------------------------------------------------------------------------------------------------------\"\n              echo \" üì• Clone Repo https://github.com/niklaushirt/cp4waiops-deployer.git\"\n              git clone https://github.com/niklaushirt/cp4waiops-deployer.git -b cp4waiops_stable\n              cd cp4waiops-deployer\n              echo \"\"\n              echo \"\"\n\n              echo \"------------------------------------------------------------------------------------------------------------------------------\"\n              echo \" üöÄ Prepare Ansible\"\n              ansible-galaxy collection install community.kubernetes:1.2.1\n              ansible-galaxy collection install kubernetes.core:2.2.3\n              ansible-galaxy collection install cloud.common\n              pip install openshift pyyaml kubernetes \n              echo \"\"\n              echo \"\"\n\n\n              echo \"------------------------------------------------------------------------------------------------------------------------------\"\n              echo \" üöÄ Injecting Licenses\"\n              echo \"     INSTANA_SALES_KEY: $INSTANA_SALES_KEY\"\n              echo \"     INSTANA_AGENT_KEY: $INSTANA_AGENT_KEY\"\n              cp ./ansible/configs/cp4waiops-roks-instana.yaml /tmp/cp4waiops-roks-practicum.yaml\n              sed -i -e \"s/sales_key: 'NONE'/sales_key: '$INSTANA_SALES_KEY'/g\" /tmp/cp4waiops-roks-practicum.yaml\n              sed -i -e \"s/agent_key: 'NONE'/agent_key: '$INSTANA_AGENT_KEY'/g\" /tmp/cp4waiops-roks-practicum.yaml\n\n\n              echo \"------------------------------------------------------------------------------------------------------------------------------\"\n              echo \" üöÄ Starting Installation\"\n              ansible-playbook ./ansible/00_cp4waiops-install.yaml -e \"config_file_path=/tmp/cp4waiops-roks-practicum.yaml\"\n              echo \"\"\n              echo \"\"\n              echo \"*****************************************************************************************************************************\"\n              echo \" ‚úÖ DONE\"\n              echo \"*****************************************************************************************************************************\"\n\n              while true\n              do\n                sleep 1000\n              done\n          env:\n          - name: INSTANA_SALES_KEY\n            value : \"<YOUR_SALES_KEY>\"\n          - name: INSTANA_AGENT_KEY\n            value : \"<YOUR_AGENT_KEY>\"\n      restartPolicy: Never\n  backoffLimit: 4\nEOF\n```\n\n<br/>\n<br/>\n\n2. Replace the <YOUR_SALES_KEY> and <YOUR_AGENT_KEY> with the keys obtained from your instructor.\n\n```yaml\n          env:\n          - name: INSTANA_SALES_KEY\n            value : \"<YOUR_SALES_KEY>\"\n          - name: INSTANA_AGENT_KEY\n            value : \"<YOUR_AGENT_KEY>\"\n```\n\n<br/>\n\n\n<InlineNotification kind=\"warning\">\n\nIf you don't have the license keys, Instana can not be installed and you won't be able to perform the step on integrating Instana.\n\n ‚ùóBut the rest of the course will **work for all other steps**.\n\n</InlineNotification>\n\n<br/>\n\n3. Run the modified script from your terminla to start the creation of the Training Resources.\n\n\nYou should get:\n\t\n```bash\nclusterrolebinding.rbac.authorization.k8s.io/installer-default-default-admin created       or unchanged if you have already lauched it once\njob.batch/waiops-easy-install-instana-practicum created\n```\n\n\n<br/>\n<br/>\n\n<InlineNotification kind=\"info\">\n\nThis creates a `Job` in the `default` Namespace that will create and load all the stuff that you need for the next chapter. \n\n</InlineNotification>\n\n</AccordionItem>\n</Accordion>\n\n\n\n\n## üöÄ TASK: Wait for installation to complete\n\n\n<InlineNotification kind=\"error\">\n\n**Important - This takes up to 20 minutes**\n\nThis takes some time depending on what infrastructure you have chosen.\n\nWait for the installation to complete before continuing. \n\n\n</InlineNotification>\n\n### Check installation progress\n\n1. Open the OpenShift Web Console and list `Pods` in the `default` Namespace:\n\n    ![instana](./../images/instana/instana_install_05.png)\n\n1. Click on the `waiops-only-instana-xyz` `Pod`\n\n1. Click on the `Logs` Tab to follow installation progress\n\n    ![instana](./../images/instana/instana_install_06.png)\n\n","type":"Mdx","contentDigest":"a1e1843fee0ca9acc752e25f31177c5f","owner":"gatsby-plugin-mdx","counter":295},"frontmatter":{"title":"Installing Instana","date":"2022-11-03T09:57:46.000Z","weight":151},"exports":{},"rawBody":"---\ntitle: \"Installing Instana\"\ndate: 2022-11-03T10:57:46+01:00\nweight: 151\n---\n\n\n## üöÄ TASK: Installing Instana\n\n<InlineNotification kind=\"warning\"> \n\n**Turbonomic License Key **\n\nIf you are not following this as part of an IBM training course, you will have to provide your own Instana Licenses.\n\n</InlineNotification>\n\nThere are two ways of installing Instana\n\n<Accordion>\n<AccordionItem title=\"üîé If you are following an IBM Course\">\n\n## Get the `oc login` command\n\n1. Open your Openshift Web Console\n1. Select `Copy Login Command`\n\n\t![image](./../images/01_fzth_ocp_connect.png)\n\n1. Copy the `oc login ..` string\n\n\t![image](./../images/02_fzth_ocp_connect.png)\n\n\n## Install and activate Instana\n\n1. Go to the following page:\n\n    <a href=\"https://ibm.biz/training-activation\" target=\"_blank\" >üöÄ Training Activation Portal</a>\n\n2. Login with the Access Information **provided by the Course Trainer**:\n    - Course ID\n    - EMail Address\n    - Course Password\n\n    ![instana](./../images/instana/instana_install_02.png)\n\n2. Click on `Install and Activate Instana`\n\n    ![instana](./../images/instana/instana_install_01.png)\n\n2. Paste in the `oc login ..`\n\n3. Click `Activate`\n\n    ![instana](./../images/instana/instana_install_03.png)\n\n2. If all is good, you should get a success message:\n\n    ![instana](./../images/instana/instana_install_04.png)\n\n</AccordionItem>\n</Accordion>\n\n\n\n\n<Accordion>\n<AccordionItem title=\"üîé If you have Licenses available (self study)\">\n\n1. Copy the following code \n\n```yaml\ncat << 'EOF' | oc apply -f -\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: installer-default-default-admin\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n  - kind: ServiceAccount\n    name: default\n    namespace: default\n---\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: waiops-easy-install-instana-practicum\n  namespace: default\nspec:\n  serviceAccountName: installer-default-default-admin\n  template:\n    spec:\n      containers:\n        - name: install\n          image: niklaushirt/cp4waiops-tools:2.0\n          imagePullPolicy: IfNotPresent\n          command:\n            - /bin/sh\n            - -c\n            - |\n              #!/bin/bash\n              #set -x\n\n\n              echo \"*****************************************************************************************************************************\"\n              echo \" ‚úÖ STARTING: INSTALL CP4WAIOPS with Demo Content\"\n              echo \"*****************************************************************************************************************************\"\n              echo \"\"\n              echo \"\"\n              echo \"------------------------------------------------------------------------------------------------------------------------------\"\n              echo \" üì• Clone Repo https://github.com/niklaushirt/cp4waiops-deployer.git\"\n              git clone https://github.com/niklaushirt/cp4waiops-deployer.git -b cp4waiops_stable\n              cd cp4waiops-deployer\n              echo \"\"\n              echo \"\"\n\n              echo \"------------------------------------------------------------------------------------------------------------------------------\"\n              echo \" üöÄ Prepare Ansible\"\n              ansible-galaxy collection install community.kubernetes:1.2.1\n              ansible-galaxy collection install kubernetes.core:2.2.3\n              ansible-galaxy collection install cloud.common\n              pip install openshift pyyaml kubernetes \n              echo \"\"\n              echo \"\"\n\n\n              echo \"------------------------------------------------------------------------------------------------------------------------------\"\n              echo \" üöÄ Injecting Licenses\"\n              echo \"     INSTANA_SALES_KEY: $INSTANA_SALES_KEY\"\n              echo \"     INSTANA_AGENT_KEY: $INSTANA_AGENT_KEY\"\n              cp ./ansible/configs/cp4waiops-roks-instana.yaml /tmp/cp4waiops-roks-practicum.yaml\n              sed -i -e \"s/sales_key: 'NONE'/sales_key: '$INSTANA_SALES_KEY'/g\" /tmp/cp4waiops-roks-practicum.yaml\n              sed -i -e \"s/agent_key: 'NONE'/agent_key: '$INSTANA_AGENT_KEY'/g\" /tmp/cp4waiops-roks-practicum.yaml\n\n\n              echo \"------------------------------------------------------------------------------------------------------------------------------\"\n              echo \" üöÄ Starting Installation\"\n              ansible-playbook ./ansible/00_cp4waiops-install.yaml -e \"config_file_path=/tmp/cp4waiops-roks-practicum.yaml\"\n              echo \"\"\n              echo \"\"\n              echo \"*****************************************************************************************************************************\"\n              echo \" ‚úÖ DONE\"\n              echo \"*****************************************************************************************************************************\"\n\n              while true\n              do\n                sleep 1000\n              done\n          env:\n          - name: INSTANA_SALES_KEY\n            value : \"<YOUR_SALES_KEY>\"\n          - name: INSTANA_AGENT_KEY\n            value : \"<YOUR_AGENT_KEY>\"\n      restartPolicy: Never\n  backoffLimit: 4\nEOF\n```\n\n<br/>\n<br/>\n\n2. Replace the <YOUR_SALES_KEY> and <YOUR_AGENT_KEY> with the keys obtained from your instructor.\n\n```yaml\n          env:\n          - name: INSTANA_SALES_KEY\n            value : \"<YOUR_SALES_KEY>\"\n          - name: INSTANA_AGENT_KEY\n            value : \"<YOUR_AGENT_KEY>\"\n```\n\n<br/>\n\n\n<InlineNotification kind=\"warning\">\n\nIf you don't have the license keys, Instana can not be installed and you won't be able to perform the step on integrating Instana.\n\n ‚ùóBut the rest of the course will **work for all other steps**.\n\n</InlineNotification>\n\n<br/>\n\n3. Run the modified script from your terminla to start the creation of the Training Resources.\n\n\nYou should get:\n\t\n```bash\nclusterrolebinding.rbac.authorization.k8s.io/installer-default-default-admin created       or unchanged if you have already lauched it once\njob.batch/waiops-easy-install-instana-practicum created\n```\n\n\n<br/>\n<br/>\n\n<InlineNotification kind=\"info\">\n\nThis creates a `Job` in the `default` Namespace that will create and load all the stuff that you need for the next chapter. \n\n</InlineNotification>\n\n</AccordionItem>\n</Accordion>\n\n\n\n\n## üöÄ TASK: Wait for installation to complete\n\n\n<InlineNotification kind=\"error\">\n\n**Important - This takes up to 20 minutes**\n\nThis takes some time depending on what infrastructure you have chosen.\n\nWait for the installation to complete before continuing. \n\n\n</InlineNotification>\n\n### Check installation progress\n\n1. Open the OpenShift Web Console and list `Pods` in the `default` Namespace:\n\n    ![instana](./../images/instana/instana_install_05.png)\n\n1. Click on the `waiops-only-instana-xyz` `Pod`\n\n1. Click on the `Logs` Tab to follow installation progress\n\n    ![instana](./../images/instana/instana_install_06.png)\n\n","fileAbsolutePath":"/Users/jorgego/CODE/waiops/nik-automationv3.6/cp4waiops-training/src/pages/09-configure-instana/09-configure-instana-01.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}
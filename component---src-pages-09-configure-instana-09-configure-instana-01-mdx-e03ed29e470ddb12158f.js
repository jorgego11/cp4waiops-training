"use strict";(self.webpackChunkexample=self.webpackChunkexample||[]).push([[3092],{439:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return r},default:function(){return k}});var a=n(3366),l=(n(7294),n(4983)),i=n(4295),o=["components"],r={},s=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.kt)("div",t)}},c=s("InlineNotification"),p=s("Accordion"),m=s("AccordionItem"),u={_frontmatter:r},d=i.Z;function k(e){var t=e.components,n=(0,a.Z)(e,o);return(0,l.kt)(d,Object.assign({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",null,"üöÄ TASK: Installing Instana"),(0,l.kt)(c,{kind:"warning",mdxType:"InlineNotification"},(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Turbonomic License Key ")),(0,l.kt)("p",null,"If you are not following this as part of an IBM training course, you will have to provide your own Instana Licenses.")),(0,l.kt)("p",null,"There are two ways of installing Instana"),(0,l.kt)(p,{mdxType:"Accordion"},(0,l.kt)(m,{title:"üîé If you are following an IBM Course",mdxType:"AccordionItem"},(0,l.kt)("h2",null,"Get the ",(0,l.kt)("inlineCode",{parentName:"h2"},"oc login")," command"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Open your Openshift Web Console")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Select ",(0,l.kt)("inlineCode",{parentName:"p"},"Copy Login Command")),(0,l.kt)("img",{parentName:"li",src:"./../images/01_fzth_ocp_connect.png",alt:"image"})),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Copy the ",(0,l.kt)("inlineCode",{parentName:"p"},"oc login ..")," string"),(0,l.kt)("img",{parentName:"li",src:"./../images/02_fzth_ocp_connect.png",alt:"image"}))),(0,l.kt)("h2",null,"Install and activate Instana"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Go to the following page:"),(0,l.kt)("a",{href:"https://ibm.biz/training-activation",target:"_blank"},"üöÄ Training Activation Portal")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Login with the Access Information ",(0,l.kt)("strong",{parentName:"p"},"provided by the Course Trainer"),":"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Course ID"),(0,l.kt)("li",{parentName:"ul"},"EMail Address"),(0,l.kt)("li",{parentName:"ul"},"Course Password")),(0,l.kt)("img",{parentName:"li",src:"./../images/instana/instana_install_02.png",alt:"instana"})),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Click on ",(0,l.kt)("inlineCode",{parentName:"p"},"Install and Activate Instana")),(0,l.kt)("img",{parentName:"li",src:"./../images/instana/instana_install_01.png",alt:"instana"})),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Paste in the ",(0,l.kt)("inlineCode",{parentName:"p"},"oc login .."))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Click ",(0,l.kt)("inlineCode",{parentName:"p"},"Activate")),(0,l.kt)("img",{parentName:"li",src:"./../images/instana/instana_install_03.png",alt:"instana"})),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"If all is good, you should get a success message:"),(0,l.kt)("img",{parentName:"li",src:"./../images/instana/instana_install_04.png",alt:"instana"}))))),(0,l.kt)(p,{mdxType:"Accordion"},(0,l.kt)(m,{title:"üîé If you have Licenses available (self study)",mdxType:"AccordionItem"},(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Copy the following code ")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'cat << \'EOF\' | oc apply -f -\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: installer-default-default-admin\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n  - kind: ServiceAccount\n    name: default\n    namespace: default\n---\napiVersion: batch/v1\nkind: Job\nmetadata:\n  name: waiops-easy-install-instana-practicum\n  namespace: default\nspec:\n  serviceAccountName: installer-default-default-admin\n  template:\n    spec:\n      containers:\n        - name: install\n          image: niklaushirt/cp4waiops-tools:2.0\n          imagePullPolicy: IfNotPresent\n          command:\n            - /bin/sh\n            - -c\n            - |\n              #!/bin/bash\n              #set -x\n\n\n              echo "*****************************************************************************************************************************"\n              echo " ‚úÖ STARTING: INSTALL CP4WAIOPS with Demo Content"\n              echo "*****************************************************************************************************************************"\n              echo ""\n              echo ""\n              echo "------------------------------------------------------------------------------------------------------------------------------"\n              echo " üì• Clone Repo https://github.com/niklaushirt/cp4waiops-deployer.git"\n              git clone https://github.com/niklaushirt/cp4waiops-deployer.git -b cp4waiops_stable\n              cd cp4waiops-deployer\n              echo ""\n              echo ""\n\n              echo "------------------------------------------------------------------------------------------------------------------------------"\n              echo " üöÄ Prepare Ansible"\n              ansible-galaxy collection install community.kubernetes:1.2.1\n              ansible-galaxy collection install kubernetes.core:2.2.3\n              ansible-galaxy collection install cloud.common\n              pip install openshift pyyaml kubernetes \n              echo ""\n              echo ""\n\n\n              echo "------------------------------------------------------------------------------------------------------------------------------"\n              echo " üöÄ Injecting Licenses"\n              echo "     INSTANA_SALES_KEY: $INSTANA_SALES_KEY"\n              echo "     INSTANA_AGENT_KEY: $INSTANA_AGENT_KEY"\n              cp ./ansible/configs/cp4waiops-roks-instana.yaml /tmp/cp4waiops-roks-practicum.yaml\n              sed -i -e "s/sales_key: \'NONE\'/sales_key: \'$INSTANA_SALES_KEY\'/g" /tmp/cp4waiops-roks-practicum.yaml\n              sed -i -e "s/agent_key: \'NONE\'/agent_key: \'$INSTANA_AGENT_KEY\'/g" /tmp/cp4waiops-roks-practicum.yaml\n\n\n              echo "------------------------------------------------------------------------------------------------------------------------------"\n              echo " üöÄ Starting Installation"\n              ansible-playbook ./ansible/00_cp4waiops-install.yaml -e "config_file_path=/tmp/cp4waiops-roks-practicum.yaml"\n              echo ""\n              echo ""\n              echo "*****************************************************************************************************************************"\n              echo " ‚úÖ DONE"\n              echo "*****************************************************************************************************************************"\n\n              while true\n              do\n                sleep 1000\n              done\n          env:\n          - name: INSTANA_SALES_KEY\n            value : "<YOUR_SALES_KEY>"\n          - name: INSTANA_AGENT_KEY\n            value : "<YOUR_AGENT_KEY>"\n      restartPolicy: Never\n  backoffLimit: 4\nEOF\n')),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"Replace the <YOUR_SALES_KEY> and <YOUR_AGENT_KEY> with the keys obtained from your instructor.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'          env:\n          - name: INSTANA_SALES_KEY\n            value : "<YOUR_SALES_KEY>"\n          - name: INSTANA_AGENT_KEY\n            value : "<YOUR_AGENT_KEY>"\n')),(0,l.kt)("br",null),(0,l.kt)(c,{kind:"warning",mdxType:"InlineNotification"},(0,l.kt)("p",null,"If you don‚Äôt have the license keys, Instana can not be installed and you won‚Äôt be able to perform the step on integrating Instana."),(0,l.kt)("p",null," ‚ùóBut the rest of the course will ",(0,l.kt)("strong",{parentName:"p"},"work for all other steps"),".")),(0,l.kt)("br",null),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"Run the modified script from your terminla to start the creation of the Training Resources.")),(0,l.kt)("p",null,"You should get:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"clusterrolebinding.rbac.authorization.k8s.io/installer-default-default-admin created       or unchanged if you have already lauched it once\njob.batch/waiops-easy-install-instana-practicum created\n")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)(c,{kind:"info",mdxType:"InlineNotification"},(0,l.kt)("p",null,"This creates a ",(0,l.kt)("inlineCode",{parentName:"p"},"Job")," in the ",(0,l.kt)("inlineCode",{parentName:"p"},"default")," Namespace that will create and load all the stuff that you need for the next chapter. ")))),(0,l.kt)("h2",null,"üöÄ TASK: Wait for installation to complete"),(0,l.kt)(c,{kind:"error",mdxType:"InlineNotification"},(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Important - This takes up to 20 minutes")),(0,l.kt)("p",null,"This takes some time depending on what infrastructure you have chosen."),(0,l.kt)("p",null,"Wait for the installation to complete before continuing. ")),(0,l.kt)("h3",null,"Check installation progress"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Open the OpenShift Web Console and list ",(0,l.kt)("inlineCode",{parentName:"p"},"Pods")," in the ",(0,l.kt)("inlineCode",{parentName:"p"},"default")," Namespace:"),(0,l.kt)("img",{parentName:"li",src:"./../images/instana/instana_install_05.png",alt:"instana"})),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Click on the ",(0,l.kt)("inlineCode",{parentName:"p"},"waiops-only-instana-xyz")," ",(0,l.kt)("inlineCode",{parentName:"p"},"Pod"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Click on the ",(0,l.kt)("inlineCode",{parentName:"p"},"Logs")," Tab to follow installation progress"),(0,l.kt)("img",{parentName:"li",src:"./../images/instana/instana_install_06.png",alt:"instana"}))))}k.isMDXComponent=!0},4295:function(e,t,n){n.d(t,{Z:function(){return E}});var a=n(7294),l=n(8650),i=n.n(l),o=n(5444),r=n(9403),s=n(6835),c=n(5900),p=n.n(c),m=function(e){var t,n=e.title,l=e.theme,i=e.tabs,o=void 0===i?[]:i;return a.createElement("div",{className:p()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=o.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===l,t))},a.createElement("div",{className:"bx--grid"},a.createElement("div",{className:"bx--row"},a.createElement("div",{className:"bx--col-lg-12"},a.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},n)))))},u=function(e){var t=e.relativePagePath,n=e.repository,l=(0,o.useStaticQuery)("1364590287").site.siteMetadata.repository,i=n||l,r=i.baseUrl,s=i.subDirectory,c=r+"/edit/"+i.branch+s+"/src/pages"+t;return r?a.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},a.createElement("div",{className:"bx--col"},a.createElement("a",{className:"EditLink-module--link--IDrl1",href:c},"Edit this page on GitHub"))):null},d=n(4275),k=n(1721),h=function(e){function t(){return e.apply(this,arguments)||this}return(0,k.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,n=e.tabs,l=e.slug,r=l.split("/").filter(Boolean).slice(-1)[0],s=n.map((function(e){var t,n=i()(e,{lower:!0,strict:!0}),s=n===r,c=new RegExp(r+"/?(#.*)?$"),m=l.replace(c,n);return a.createElement("li",{key:e,className:p()((t={},t["PageTabs-module--selected-item--aBB0K"]=s,t),"PageTabs-module--list-item--024o6")},a.createElement(o.Link,{className:"PageTabs-module--link--Kz-7R",to:""+m},e))}));return a.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},a.createElement("div",{className:"bx--grid"},a.createElement("div",{className:"bx--row"},a.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},a.createElement("nav",{"aria-label":t},a.createElement("ul",{className:"PageTabs-module--list--xLqxG"},s))))))},t}(a.Component),g=h,N=n(2881),f=n(6958),b=n(36),y=function(e){var t=e.date,n=new Date(t);return t?a.createElement(b.X2,{className:"last-modified-date-module--row--XJoYQ"},a.createElement(b.sg,null,a.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",n.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},E=function(e){var t=e.pageContext,n=e.children,l=e.location,c=e.Title,p=t.frontmatter,k=void 0===p?{}:p,h=t.relativePagePath,b=t.titleType,E=k.tabs,_=k.title,A=k.theme,v=k.description,T=k.keywords,w=k.date,I=(0,f.Z)().interiorTheme,C=(0,o.useStaticQuery)("2456312558").site.pathPrefix,S=C?l.pathname.replace(C,""):l.pathname,x=E?S.split("/").filter(Boolean).slice(-1)[0]||i()(E[0],{lower:!0}):"",P=A||I;return a.createElement(s.Z,{tabs:E,homepage:!1,theme:P,pageTitle:_,pageDescription:v,pageKeywords:T,titleType:b},a.createElement(m,{title:c?a.createElement(c,null):_,label:"label",tabs:E,theme:P}),E&&a.createElement(g,{title:_,slug:S,tabs:E,currentTab:x}),a.createElement(N.Z,{padded:!0},n,a.createElement(u,{relativePagePath:h}),a.createElement(y,{date:w})),a.createElement(d.Z,{pageContext:t,location:l,slug:S,tabs:E,currentTab:x}),a.createElement(r.Z,null))}}}]);
//# sourceMappingURL=component---src-pages-09-configure-instana-09-configure-instana-01-mdx-e03ed29e470ddb12158f.js.map